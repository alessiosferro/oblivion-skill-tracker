<button
    type="button"
    (click)="isFormDisplayed = true"
>
    Create new character
</button>

<form
    #form="ngForm"
    *ngIf="isFormDisplayed"
    (ngSubmit)="onFormSubmit(form.value)"
>
    <div>
        <label for="name">Name</label>
        <input
            id="name"
            type="text"
            ngModel
            name="name"
        >
    </div>

    <div>
        <label for="level">Level</label>
        <input
            id="level"
            type="text"
            ngModel
            name="level"
        >
    </div>

    <div>
        <label for="race">Race</label>
        <select
            id="race"
            ngModel
            name="race"
        >
            <option value>Choose...</option>
            <option
                [value]="race"
                *ngFor="let race of races$ | async"
            >
                {{ race | titlecase }}
            </option>
        </select>
    </div>

    <div>
        <label for="gender">Gender</label>
        <select
            id="gender"
            ngModel="male"
            name="gender"
        >
            <option value="male">Male</option>
            <option value="female">Female</option>
        </select>
    </div>

    <div>
        <label for="major">Major Skills</label>
        <select
            id="major"
            ngModel
            name="major"
            multiple
        >
            <option value>Choose...</option>
            <option
                [value]="skill"
                *ngFor="let skill of skills$ | async"
            >
                {{ skill.name | titlecase }}
            </option>
        </select>
    </div>

    <button type="submit">Submit</button>
</form>

<table>
    <tbody>
        <tr>
            <th>Character Name</th>
            <th>Level</th>
            <th>Actions</th>
        </tr>
        <tr *ngFor="let character of characters$ | async; let i = index">
            <td>{{Â character.name }}</td>
            <td>{{ character.level }}</td>
            <td>
                <button
                    type="button"
                    (click)="onDisplayDetail(character)"
                >
                    Detail
                </button>
                <button
                    type="button"
                    (click)="onCharacterRemove(i, character.id)"
                >
                    Remove
                </button>

                <div *ngIf="isRemoveConfirmDisplayed[i]">
                    Are you sure?
                    <button
                        type="button"
                        (click)="onRemoveConfirm(i, true)"
                    >
                        Yes
                    </button>
                    <button
                        type="button"
                        (click)="onRemoveConfirm(i, false)"
                    >
                        No
                    </button>
                </div>
            </td>
        </tr>
    </tbody>
</table>

<app-character
    *ngIf="isCharacterDisplayed"
    [character]="character$ | async"
></app-character>
